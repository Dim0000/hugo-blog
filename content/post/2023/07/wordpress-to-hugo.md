---
title: 【Hugo】WordPressブログをHugo・AWSに移行した
description: この度、レンタルサーバーにインストールしたWordPressブログをHugoに乗り換え、ホスティングもAWS（S3・CloudFront）に変更しましたので、移行の理由や感想等を書いていきます。
date: 2023-07-16
categories: 
  - 技術記事
tags: 
  - ブログ運営
  - Hugo
  - AWS
  - GitHub
  - WordPress
archives: 
  - 2023/07
thumbnail: /images/hugo.webp
---

この度、レンタルサーバーにインストールしたWordPressブログを**Hugo**に乗り換え、ホスティングも**AWS**（S3・CloudFront）に変更しましたので、移行の理由や感想等を書いていきます。

<!--more-->

## 当サイトの構成について

当サイトの構成についてですが、これまではレンタルサーバーにWordPressをインストールし、ドメイン取得サービスで取得した独自ドメインの`dimzakki.com`でサイトを運営していました。

{{< luminous src="/images/wordpress-to-hugo-01.png" caption="WordPress・レンタルサーバーの構成">}}

レンタルサーバー・WordPressのサイト構成から一貫していたことですが、あくまで趣味としてのブログ運営であることから、なるべく低コストで運営することを重視していました。サーバーは一番安いプランにし、ドメインは無料キャンペーンで取得したものを維持してきました。ですので、運営で掛かっていた費用は**年間6,000円未満**のサーバー代のみでした。

ただ、安いプランを契約していると、サーバー性能が貧弱なのでサイトスピードがあまり出ません。その為、なるべくサイト速度が低下しないようブログ内容も余計な装飾を抑え、シンプルな内容にしてきました。

今回、ブログの構成を一新し、レンタルサーバーメインの構成から、**AWS**へと移行することにしました。具体的には、サイトコンテンツを静的サイトジェネレータ（SSG）である**Hugo**に移行してAWS S3でホスティングしています。また、SSL対応やパフォーマンス向上の為CloudFrontをキャッシュサーバーとしています。ドメインもAmazon Route 53へ移管しました。

また、サイトのコンテンツは**Git**（**Github**）で管理しており、ブログ更新時のHugo のビルドとS3へのデプロイはGitHub ActionsによるCI/CDパイプラインを用いて自動的に行っています。

{{< luminous src="/images/wordpress-to-hugo-02.png" caption="Hugo・AWS構成">}}

### SSGについて

**SSG**とは、「Static Site Generator（静的サイトジェネレーター）」の略で、文字通り静的なHTMLを生成するツールのことです。静的であるため、アクセスしたユーザーには常に同じ内容が表示されます。有名なSSGには、Hugoの他にGatsbyやJekyllなどがあります。

反対に、WordPressは動的サイトに分類され、アクセスしたユーザー毎に自動でページ生成されて表示されます。

HugoはGo言語で実装されており、ビルドの掛かる時間が高速であることが大きな特徴です。また、ブログ用のテンプレートが豊富にあることもメリットの1つですね。

## Hugoに移行した理由

今回、WordPressからHugoへ移行した一番の理由は、**コストを抑えつつ高速化したかった**からです。

WordPressである程度の速度を得るには、それなりの性能のサーバーを使用する必要があり、結果費用が掛かるので赤字運営となってしまいます。

当ブログではWordPressで実現できる様な、複雑な機能などは特に必要としていなかったので、それなら静的サイトジェネレータでお安く速度を重視したサイトへ変えようと思った訳です。

Hugo・AWS構成を選択したのは、静的サイトジェネレータの中ではこの構成が比較的メジャーであり、ネット上の参考文献も他より多かったことも理由になりました。

また、AWSは仕事であまり使う機会が無いので、AWSへの知見を深めるのにも丁度良いタイミングだと思ったのも理由の1つになります。

## Hugoのメリット

ここから、レンタルサーバー・WordPressからHugo・AWSに移行するにあたってのメリットについてまとめます。

### サイトスピードに優れる

Hugoは静的サイトジェネレーターであり、HTMLを公開しているだけなので**表示速度に優れている**のが特徴です。

対して、WordPressはリクエスト毎にPHPでデータベースにアクセスしてページを生成しているため、どうしても重くなってしまいます。

### セキュリティリスクが少ない

WordPressでは管理ツールでサイトの管理を行うので、不正アクセスなどのセキュリティリスクが付きまといます。また、プラグインも様々な開発元が制作していますので、脆弱性が発生する可能性があります。

静的サイトであるHugoにはそのようなリスクは無いため、**セキュリティ的に堅牢**であると言えます。なお、AWSについてはアカウント乗っ取りなどのリスクがあるため、最低限MFA（2段階認証）の有効化をする必要があります。

### コストパフォーマンスに優れる  

このサイト構成の場合に掛かる費用は、AWSでのRoute 53・S3・CloudFrontの利用代のみになります。費用はドル換算のため、為替レートによって変動はありますが、個人のブログサイト程度ならレンタルサーバーと比較して**低コスト**で運営ができます。

厳密に言うと、DDoS攻撃によって高額な請求が発生する、いわゆるEDoS（Economic Denial of Sustainability）攻撃のリスクは存在しますが、個人サイトなので、そこまで気にしなくてもいいかなと思います。費用は掛かりますが、AWS WAFなどで対策することができます。

### サーバー管理が必要ない

Hugo・AWS構成ではサーバーやDBを管理する必要もありません。他にも、サイトの内容についてはGitHubのリポジトリにファイルを置くことで、WordPressより低コストでバージョン管理が可能です。

## Hugoのデメリット

次に、Hugoのデメリットについてもまとめます。

### サイト構築の難易度がWordPressより高い

Hugoだけではなく、AWSやGitの基礎知識が必要なので、WordPressよりは若干ハードルが高いです。

とは言え一度構築さえしてしまえば、記事の更新にはGitへのプッシュだけで簡単に行えます。

### 日本語の資料が少ない

ネット上のドキュメントの数は、WordPressに比べると圧倒的に少ないです。場合によっては、英語の資料もある程度見ていく必要があります。

### 動的な機能が使えない

Hugo上で人気記事ランキング・お問い合わせフォーム・コメント機能の様な動的な機能を実装するのには、ある程度カスタマイズが必要になってきます。なお、最低限必要なお問い合わせフォームに関しては、こだわりが無ければGoogleフォームで簡単に実装が可能です。

## Hugoへの移行手順

WordPressからHugo・AWSに移行した際のメモを、備忘録として記事にまとめました。

1. レンタルサーバーのドメインをRoute 53に移管する
* {{< ref "/domain-to-route53" >}}

2. Hugoをローカルに構築してコンテンツを移す
* {{< ref "/develop-hugo" >}}

3. HugoをS3にデプロイし、CloudFrontで配信する
* {{< ref "/hugo-deploy" >}}

4. GitHubで自動デプロイを設定する
* {{< ref "/hugo-github" >}}

以上の4つのプロセスでサイトを運営することができました。

また、必須の機能ではありませんが、人気記事ランキングも実装してみました。

{{< box "関連記事" >}}
<ul>
<li>{{< ref "/hugo-ranking" >}}</li>
</ul>
{{< /box >}}

## 移行した感想

とりあえず、無事にHugo・AWSへサイトを移行できたので一安心です。ブログ自体もスピードがかなり高速になりました。

手順の中で、一番時間が掛かったのはサイトコンテンツの移行でした。サイトの構築自体は参考文献が色々とありましたので、思ったよりスムーズに行きました。

運営コストについては、初月はドメイン代が掛かっているものの、以降の月は平均して1ヶ月で100円以下と非常に安く運用できています。

{{< luminous src="/images/wordpress-to-hugo-03.png" caption="2023年6月以降のサイト運営コスト">}}

悲しいことに、移行した後にロリポップの自動更新を切るのを忘れていて、結局プラス1年サーバー代を払うことになってしまいましたが…。

* * * 

以上がWordPressからHugoへの移行についての話になります。AWSの各種サービスも色々と触ることができましたので、良い勉強になったと思います。

今後もサイトの更新を進めていきたいと思います。以上で記事を終わりにします。