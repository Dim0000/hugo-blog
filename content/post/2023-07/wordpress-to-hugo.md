---
title: 【Hugo】WordPressブログをHugo（AWS）に移行した
description: この度、レンタルサーバーへ立てたWordPressのブログを**Hugo**に乗り換え、ホスティングもAWS S3・CloudFrontに変更しましたので、移行の理由や感想等を書いていきます。
date: 2023-07-16
categories: 
  - 技術記事
tags: 
  - ブログ運営
  - Hugo
  - AWS
  - GitHub
  - WordPress
archives: 
  - 2023/07
thumbnail: /images/hugo.webp
---

この度、レンタルサーバーへ立てた**WordPress**のブログを**Hugo**に乗り換え、ホスティングも**AWS S3**・**CloudFront**に変更しましたので、移行の理由や感想等を書いていきます。

<!--more-->

## ブログの構成について

まず、当ブログの構成についてですが、これまでは**レンタルサーバー**（ロリポップ）に**WordPress**をインストールし、ドメイン取得サービス（ムームドメイン）で取得した独自ドメイン`dimzakki.com`でサイトを運営していました。

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad: true});</script>
<figure>
  <div class="mermaid">
  graph LR
    A((訪問者))
    A ---> B(WordPress)
    subgraph レンタルサーバー
    B <---> C(DB)
    end
    D((管理者)) --->|サイト管理| B
  </div>
  <figcaption>
    <p>レンタルサーバー・WordPressの構成</p>
  </figcaption>
</figure>

レンタルサーバー + WordPressのサイト構成では、あくまで趣味としてのブログ運営であることから、なるべく低コストで運営することを重視していました。サーバーは一番安いプランにし、ドメインはロリポップの無料キャンペーン取得したものを維持してきました。ですので、運営で掛かっていた費用は**年間6,000円未満のサーバー代のみ**でした。

安いプランを契約していると、サーバーが貧弱なのでサイトスピードがあまり出ません。その為なるべく重くならないようブログ内容も装飾を抑え、シンプルな内容にしてきました。

今回、ブログの構成を一新し、レンタルサーバーメインの構成から、**AWS**メインの物へと移行することにしました。記事内容を静的サイトジェネレータ（SSG）である**Hugo**に移行して**Github**上で管理し、サイトを**AWS S3**でホスティングを行っています。また、SSL対応やパフォーマンス向上の為**CloudFront**をキャッシュサーバーとしています。ドメインも**Amazon Route 53**へ移管しました。

ブログ更新時のS3へのデプロイはGitHub Actionsで自動的に行っています。

<figure>
  <div class="mermaid">
  graph LR
    A((訪問者)) ---> B(CloudFront)
    subgraph AWS
    C(Route 53・ACM)
    B ---> D(S3)
    end
    subgraph GitHub
    E(リポジトリ・GitHub Actions)
    end
    F((管理者)) --->|Push| E
    E --->|デプロイ| D
  </div>
  <figcaption>
    <p>Hugo + AWS構成</p>
  </figcaption>
</figure>

## WordPressと比較したHugoの利点・欠点

まずは、この構成からAWS + Hugoへ移行するに当たっての、WordPressとのメリット・デメリットをまとめてみます。

### メリット

* サイトスピードに優れる  
Hugoは静的サイトジェネレーターであり、HTMLを公開しているだけなので**表示速度に優れている**のが特徴です。対して、WordPressはリクエスト毎にPHPでデータベースにアクセスしてページを生成しているため、どうしても重くなってしまいます。

* セキュリティリスクが少ない  
WordPressでは管理ツールでサイトの管理を行うので、不正アクセスなどの**セキュリティリスク**が付きまといます。また、プラグインも様々な開発元が制作していますので、脆弱性が発生する可能性があります。静的サイトであるHugoはそのようなリスクはありません。

* バージョン管理ができる  
Hugoは全てファイルで構成されているので、GitHubのリポジトリにファイルを置くことで、WordPressより低コストでバージョン管理が可能です。

* コストパフォーマンスに優れる  
このサイト構成で掛かる費用はAWSのRoute 53・S3・CloudFrontの利用代であり、個人サイト程度なら**低コスト**で運営ができます。

### デメリット

* サイト構築の難易度がWordPressより高い  
Hugoだけではなく、AWSやGitの基礎知識が必要なので、WordPressよりは若干ハードルが高いです。

* 日本語の資料が少ない  
ネット上のドキュメントの数は、WordPressに比べると圧倒的に少ないです。場合によっては、ある程度英語の資料も見ていく必要があります。

* 動的な機能が使えない  
Hugo上で人気記事ランキング・お問い合わせフォーム・コメント機能の様な動的な機能を実装するのには、ある程度カスタマイズが必要になってきます。

## Hugoに移行した理由

今回、僕がHugoへ移行した一番の理由は、**コストを抑えつつサイトスピードを上げたかった**からです。

WordPressである程度の速度を得るには、それなりの性能のサーバーに変える必要があり、結果費用が掛かるので赤字運営となってしまいます。当ブログではWordPressで実現できる様な、複雑な機能などは特に必要としていなかったので、それなら静的サイトジェネレータでお安く速度を重視したサイトへ変えようと思った訳です。

Hugo + AWS構成を選択したのは、静的サイトジェネレータの中ではこの構成が比較的メジャーであり、参考文献も他より多かったことも理由になりました。

また、AWSは仕事であまり使う機会が無いので、AWSへの知見を深めるのにも丁度良いタイミングだと思ったのも理由の1つになります。

## WordPressからHugoに移行した時の備忘録

以下に、手順の全てではありませんが、WordPressからHugoに移行した際のメモを記事としてまとめます。

1.レンタルサーバーのドメインをRoute 53に移管する

  * {{< ref "/domain-to-route53" >}}

2.Hugoをローカルに構築してコンテンツを移す

  * {{< ref "/develop-hugo" >}}

3.HugoをS3にデプロイし、CloudFrontで配信する

  * {{< ref "/hugo-deploy" >}}

4.GitHubで自動デプロイを設定する

  * {{< ref "/hugo-github" >}}

## ブログの引っ越しをした感想

とりあえず、無事にHugo・AWSへサイトを移行できたので一安心です。ブログ自体もスピードがサクサクになりました。

手順の中で一番時間が掛かったのはコンテンツの移行でした。AWSも色々と触りましたので良い勉強になったと思います。

また、運営コストも8月中は1ヶ月で100円以下と非常に安く運用できていました。（移行した後にロリポップの自動更新を切るのを忘れていて、結局プラス1年サーバー代を払うことになったのはまた別の話…）

{{< luminous src="/images/wordpress-to-hugo-01.png" caption="8月のサイト運営コスト">}}

今後、見た目のカスタマイズなども進めていきたいですね。以上で記事を終わりにします。